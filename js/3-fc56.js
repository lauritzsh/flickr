webpackJsonp([3],{63:function(t,e,n){"use strict";var r=n(66),i=n(70);n(5);t.exports=i.extend({render:function(){var t=this;navigator.geolocation.getCurrentPosition(function(e){var n=e.coords,i=new r(null,{queryParams:{lat:n.latitude,lon:n.longitude}});i.getPage(t.page,{success:function(e){window.x=e.models[0],t.collection=i,t.insertPhotos(e)}})},function(e){t.insertPhotos(null)})}})},66:function(t,e,n){"use strict";var r=n(67);t.exports=r.extend({queryParams:{method:"flickr.photos.search"}})},67:function(t,e,n){"use strict";var r=n(27),i=n(69),o=n(68);t.exports=r.extend({model:i,url:o.apiBase+"?api_key="+o.key+"&format=json&nojsoncallback=1",parseRecords:function(t){return t.photos.photo},parseState:function(t,e,n){return n.totalPages=t.photos.pages,n.totalRecords=parseInt(t.photos.total),n},state:{pageSize:12,firstPage:1}})},68:function(t,e){"use strict";t.exports={key:"5b2014d08342e246c70538803960de8c",apiBase:"https://api.flickr.com/services/rest/",feeds:"https://api.flickr.com/services/feeds/"}},69:function(t,e,n){"use strict";var r=n(6);t.exports=r.Model.extend({thumbnail:function(){return"https://farm"+this.get("farm")+".staticflickr.com/"+this.get("server")+"/"+this.get("id")+"_"+this.get("secret")+"_q.jpg"},large:function(){return"https://farm"+this.get("farm")+".staticflickr.com/"+this.get("server")+"/"+this.get("id")+"_"+this.get("secret")+"_b.jpg"},title:function(){return this.get("title")},link:function(){return"https://www.flickr.com/photos/"+this.get("owner")+"/"+this.get("id")}})},70:function(t,e,n){"use strict";var r=(n(13),n(66),n(3)),i=n(5),o=n(29);n(28)(i),t.exports=Backbone.View.extend({el:"#main",photos:i(".photos"),navigation:i(".main__nav"),page:1,collection:null,load:function(){this.navigation.html(""),i(".fancybox").fancybox({openEffect:"none",closeEffect:"none"}),i(".loading__progress").val(0),i(".loading").css({top:this.photos.offset().top,width:this.photos.outerWidth(),height:this.photos.outerHeight()}),i(".loading").show();var t='<button disabled class="prev">Previous</button><button class="next">Next</button>';this.navigation.html(t)},initialize:function(){this.load(),this.render()},events:{"keypress .search":"search","click .prev":"prev","click .next":"next"},search:function(t){if(13===t.which){var e=t.currentTarget.value.replace(/'/g,"").replace(/\W+/g,"-");Backbone.history.navigate("#/search/"+e)}},prev:function(){this.collection.hasPreviousPage()&&(this.page--,this.newPage())},next:function(){this.collection.hasNextPage()&&(this.page++,this.newPage())},newPage:function(){var t=this;i("button").attr("disabled",!0),i(".loading__progress").val(0),i(".loading").fadeIn("slow",function(){t.render()})},insertPhotos:function(t){var e=this,a=n(71),s=r.template(a);if(t){e.photos.html(s({photos:t.models}));i(".draggable").bind("dragstart",function(t){i(".drop-target").css({"background-image":'url("../images/plus.png")'}),window.dragSourceElement=i(this).children()}).bind("dragend",function(){i(".drop-target").css({"background-image":'url("../images/download.png")'})});var u=o(e.photos);u.on("done",function(){i(".loading").fadeOut(),e.collection.hasNextPage()&&i(".next").attr("disabled",!1),e.collection.hasPreviousPage()&&i(".prev").attr("disabled",!1)});var l=0;u.on("progress",function(t,e){i(".loading__progress").val(l++)})}else e.photos.html(s({photos:[]})),i(".loading").fadeOut(),i("button").attr("disabled",!0)}})},71:function(t,e){t.exports='<% if (photos.length) { _.each(photos, function(photo) { %>\n  <div class="photo draggable">\n    <a class="photo__link fancybox" rel="gallery" href="<%= photo.large() %>" title="<%= photo.title() %>">\n      <img class="photo__image" src="<%= photo.thumbnail() %>" alt="<%- photo.get(\'title\') %>">\n    </a>\n  </div>\n<% }) } else { %>\n  <div class="error"><span class="error__message">No images found</span></div>\n<% } %>\n'}});